webpackJsonp([7],{"1NKA":function(t,e,n){"use strict";function s(t){n("2JAw")}Object.defineProperty(e,"__esModule",{value:!0});var a={name:"Enter",props:{},data:function(){return{}},computed:{},created:function(){},methods:{},mounted:function(){}},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"enter-wrap"},[n("router-view")],1)},i=[],o={render:r,staticRenderFns:i},c=o,u=n("XAIM"),l=s,d=u(a,c,!1,l,null,null);e.default=d.exports},"2JAw":function(t,e){},"361u":function(t,e,n){"use strict";var s=n("3MFX"),a=n("EcfS"),r=n("UIuv"),i=n.n(r),o=n("bvqH"),c=n("5bL7"),u={state:{role:"guest",token:Object(o.a)("USERTOKEN")||null,name:"游客"},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_ROLE:function(t,e){t.role=e},SET_NAME:function(t,e){t.name=e}},actions:{changeToken:function(t,e){var n=t.commit;t.state;Object(o.c)("USERTOKEN",e),n("SET_TOKEN",e)},toRemoveToken:function(t){var e=t.commit;t.state;Object(o.b)("USERTOKEN"),e("SET_TOKEN",""),e("SET_ROLE","guest"),e("SET_NAME","游客")},loginByUsername:function(t,e){var n=t.commit;t.state;return Object(c.d)(e).then(function(t){return t.success?(Object(o.c)("USERTOKEN",t.token),n("SET_TOKEN",t.token),i.a.resolve(t)):i.a.reject(t)}).catch(function(t){return i.a.reject(t)})},getInfoByToken:function(t,e){var n=t.commit;t.state;return Object(c.c)(e).then(function(t){return n("SET_NAME",t.name),n("SET_ROLE",t.role),i.a.resolve(t)}).catch(function(t){return i.a.reject(t)})}}},l=u,d={token:function(t){return t.user.token},name:function(t){return t.user.name},role:function(t){return t.user.role}},v=d;n("HiYY");s.a.use(a.a);var f=new a.a.Store({modules:{user:l},getters:v,strict:!1,plugins:[]});e.a=f},"5bL7":function(t,e,n){"use strict";function s(t){return f.a.post("api/login",u()({},t)).then(function(t){return d.a.resolve(t.data)}).catch(function(t){return d.a.reject(t)})}function a(t){return f.a.post("api/signin",u()({},t)).then(function(t){return d.a.resolve(t.data)}).catch(function(t){return d.a.reject(t)})}function r(t){return f.a.post("api/info",{token:t}).then(function(t){return d.a.resolve(t.data)}).catch(function(t){return d.a.reject(t)})}function i(t){return f.a.post("api/article_post",{title:t.title,desc:t.desc,content:t.content,art_id:t.art_id,thumb:t.thumb,time:t.time}).then(function(t){return d.a.resolve(t.data)}).catch(function(t){return d.a.reject(t)})}function o(){return f.a.get("api/article_all").then(function(t){return d.a.resolve(t.data)}).catch(function(t){return d.a.reject(t)})}e.d=s,e.e=a,e.c=r,e.b=i,e.a=o;var c=n("34v0"),u=n.n(c),l=n("UIuv"),d=n.n(l),v=n("gCy3"),f=n.n(v)},"707g":function(t,e){},Awfp:function(t,e,n){function s(t){var e=a[t];return e?Promise.all(e.slice(1).map(n.e)).then(function(){return n(e[0])}):Promise.reject(new Error("Cannot find module '"+t+"'."))}var a={"./editor/arteditor.vue":["bU3X",0],"./enter/index.vue":["1NKA"],"./enter/login.vue":["b2T6",2],"./enter/signin.vue":["69Pf",3],"./layout/index.vue":["cPej"],"./layout/layoutHead.vue":["ufKC"],"./main/artList.vue":["kE5O",4],"./main/index.vue":["sVyT",1]};s.keys=function(){return Object.keys(a)},s.id="Awfp",t.exports=s},BAFm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("psfr"),a=(n("361u"),n("bvqH"));s.a.beforeEach(function(t,e,n){Object(a.a)("USERTOKEN")&&"/user/login"===t.path?n({path:"/"}):n()})},Bz1m:function(t,e){},D0tn:function(t,e,n){"use strict";function s(t,e){return"undefined"!=typeof getComputedStyle?getComputedStyle(t,null).getPropertyValue(e):t.style[e]}function a(t){return!1!==o&&("standar"===o?t:o+t.charAt(0).toUpperCase()+t.substr(1))}function r(t,e){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var s in n)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[s]:("00"+n[s]).substr((""+n[s]).length)));return e}e.c=s,e.b=a,e.a=r;var i=document.createElement("div").style,o=function(){var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==i[t[e]])return e;return!1}()},bvqH:function(t,e,n){"use strict";function s(t){return o.a.get(t)}function a(t,e){return o.a.set(t,e)}function r(t){return o.a.remove(t)}e.a=s,e.c=a,e.b=r;var i=n("xBUk"),o=n.n(i)},cPej:function(t,e,n){"use strict";function s(t){n("Bz1m")}Object.defineProperty(e,"__esModule",{value:!0});var a=n("34v0"),r=n.n(a),i=n("EcfS"),o=n("ufKC"),c={name:"Layout",props:{},data:function(){return{}},computed:r()({},Object(i.b)({name:"name"})),created:function(){},methods:{},components:{layoutHead:o.default},mounted:function(){}},u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"layout-wrap"},[s("div",{staticClass:"layout-head"},[s("layoutHead")],1),t._v(" "),s("div",{staticClass:"layout-banner hero "},[s("div",{staticClass:"hero-body",staticStyle:{"padding-bottom":"0.5rem"}},[s("div",{staticClass:"hero-content container"},[t._m(0,!1,!1),t._v(" "),s("div",{staticClass:"right"},[s("img",{attrs:{src:n("taFD"),alt:""}}),t._v(" "),s("div",{staticClass:"desc"},[t._v("这是一个机智的描述 blablablablablablabla")])])])])]),t._v(" "),s("div",{staticClass:"layout-submenu"},[s("input",{attrs:{type:"checkbox",id:"expressSubmenu"}}),t._v(" "),s("div",{staticClass:"container"},[t._m(1,!1,!1),t._v(" "),s("nav",{staticClass:"level"},[s("p",{staticClass:"level-item "},[s("router-link",{staticClass:"link is-info",attrs:{to:"/"}},[t._v("首页")])],1),t._v(" "),t._m(2,!1,!1),t._v(" "),t._m(3,!1,!1),t._v(" "),t._m(4,!1,!1)])])]),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"layout-main"},[s("router-view")],1)])])},l=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"left"},[n("h1",{staticClass:"title"},[t._v("Joseph 的 博客")]),t._v(" "),n("h2",{staticClass:"subtitle"},[t._v("这是一个 我的 博客")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"show-sub navbar-burger",attrs:{for:"expressSubmenu"}},[n("span"),t._v(" "),n("span"),t._v(" "),n("span")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"level-item "},[n("a",{staticClass:"link is-info"},[t._v("分类A")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"level-item "},[n("a",{staticClass:"link is-info"},[t._v("分类B")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"level-item "},[n("a",{staticClass:"link is-info"},[t._v("分类C")])])}],d={render:u,staticRenderFns:l},v=d,f=n("XAIM"),m=s,h=f(c,v,!1,m,null,null);e.default=h.exports},oh57:function(t,e,n){t.exports=function(t){return function(){return n("Awfp")("./"+t+".vue")}}},psfr:function(t,e,n){"use strict";var s=n("3MFX"),a=n("1eSk"),r=n("361u"),i=n("cPej"),o=n("1NKA"),c=n("oh57");s.a.use(a.a),e.a=new a.a({routes:[{path:"/user",name:"登录注册",component:o.default,redirect:"/user/login",children:[{path:"login",component:c("enter/login"),name:"登录"},{path:"signin",component:c("enter/signin"),name:"注册"}]},{path:"/",name:"主界面",component:i.default,redirect:"/main",children:[{path:"articleedit",component:c("editor/arteditor")},{path:"main",component:c("main/index")}],beforeEnter:function(t,e,n){r.a.getters.token?r.a.dispatch("getInfoByToken",r.a.getters.token).then(function(t){n()}).catch(function(t){console.log(t),n()}):n()}}]})},taFD:function(t,e,n){t.exports=n.p+"static/img/jizhi.a5cc359.png"},ufKC:function(t,e,n){"use strict";function s(t){n("707g")}Object.defineProperty(e,"__esModule",{value:!0});var a=n("34v0"),r=n.n(a),i=n("D0tn"),o=n("EcfS"),c=Object(i.b)("transform"),u=Object(i.b)("transition"),l={name:"layoutHead",props:{},data:function(){return{sliderShow:!1,startX:0,touchMove:0,sliderWHide:!1}},computed:r()({},Object(o.b)({name:"name",role:"role"})),created:function(){},methods:{logoutClick:function(){var t=this;this.$store.dispatch("toRemoveToken"),this.$router.push({path:"/"}),setTimeout(function(){t.sliderShow&&t.sliderClose()},10)},routerGo:function(t){var e=this;this.$router.push({path:"/"+t}),setTimeout(function(){e.sliderShow&&e.sliderClose()},10)},sliderClose:function(){this.$refs.sliderWrap.style[u]="transform 0.3s",this.$refs.sliderWrap.style[c]="translate3d(-100%,0,0)",this.sliderWHide=!0},sliderOpen:function(){this.$refs.sliderWrap.style[u]="transform 0.3s",this.$refs.sliderWrap.style[c]="translate3d(-100%,0,0)",this.sliderShow=!0},sliderAfterEnter:function(){this.$refs.sliderWrap.style[c]="translate3d(0,0,0)",this.sliderWHide=!1},slidTouchStart:function(t){var e=t.touches[0];this.startX=e.clientX?e.clientX:e.pageX},slidTouchMove:function(t){var e=t.touches[0],n=this.startX,s=e.clientX?e.clientX:e.pageX;this.touchMove=-(n-s)>0?0:-(n-s),this.test=c+":translate3d("+-(n-s)+"px,0,0)",this.$refs.sliderWrap.style[c]="translate3d("+this.touchMove+"px,0,0)"},slidTouchEnd:function(t){this.$refs.sliderWrap.style[u]="transform 0.5s",this.touchMove<-90?(this.$refs.sliderWrap.style[c]="translate3d(-100%,0,0)",this.sliderWHide=!0):this.$refs.sliderWrap.style[c]="translate3d(0,0,0)"},transEndHandle:function(){this.$refs.sliderWrap.style[u]=null,this.sliderWHide&&(this.sliderShow=!1,this.sliderWHide=!1)}},mounted:function(){}},d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[n("div",{staticClass:"navbar-brand"},[t._m(0,!1,!1),t._v(" "),n("div",{staticClass:"navbar-burger",on:{click:t.sliderOpen}},[n("span"),t._v(" "),n("span"),t._v(" "),n("span")])]),t._v(" "),n("div",{staticClass:"navbar-menu"},[n("ul",{staticClass:"navbar-start tool-menu"},["guest"!=t.role?n("router-link",{staticClass:"navbar-item",attrs:{to:"/articleedit"}},[t._v("写文章")]):t._e(),t._v(" "),"guest"==t.role?n("li",{staticClass:"navbar-item"},[t._v("留言箱")]):t._e(),t._v(" "),"admin"==t.role?n("li",{staticClass:"navbar-item"},[t._v("权限")]):t._e(),t._v(" "),n("li",{staticClass:"navbar-item"},[t._v("我的GitHub")])],1),t._v(" "),n("div",{staticClass:"navbar-end user-status"},[n("div",{staticClass:"navbar-item"},[n("div",{staticClass:"field is-grouped"},[n("p",{staticClass:"control"},["guest"==t.role?n("router-link",{staticClass:"button success",attrs:{to:"/user"}},[t._v("\r\n                登录/注册 \r\n              ")]):t._e(),t._v(" "),"guest"!=t.role?n("a",{staticClass:"button success",on:{click:t.logoutClick}},[t._v("\r\n                退出登录\r\n              ")]):t._e()],1)])]),t._v(" "),n("div",{staticClass:"navbar-item",staticStyle:{"padding-right":"0"}},[n("div",{staticClass:"user-status"},[n("span",{},[t._v("你好:"+t._s(t.name))]),t._v(" "),n("span",[t._v("权限:"+t._s(t.role))])])])])])]),t._v(" "),n("transition",{attrs:{name:"slider"},on:{"after-enter":t.sliderAfterEnter}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.sliderShow,expression:"sliderShow"}],staticClass:"slider",on:{click:t.sliderClose}},[n("div",{ref:"sliderWrap",staticClass:"slider-wrap",on:{click:function(t){t.stopPropagation()},touchstart:t.slidTouchStart,touchmove:t.slidTouchMove,touchend:t.slidTouchEnd,transitionend:t.transEndHandle}},[n("div",{staticClass:"top"},[n("div",{staticClass:"user"},[n("h3",[t._v(t._s(t.name))]),t._v(" "),n("p",[t._v("权限:"+t._s(t.role))])]),t._v(" "),n("div",{staticClass:"access"},["guest"==t.role?n("a",{staticClass:"button success ",on:{click:function(e){t.routerGo("user")}}},[t._v("\r\n             登录/注册 \r\n          ")]):t._e(),t._v(" "),"guest"!=t.role?n("a",{staticClass:"button  success",on:{click:t.logoutClick}},[t._v("\r\n            退出登录\r\n          ")]):t._e()])]),t._v(" "),n("aside",{staticClass:"menu"},[n("p",{staticClass:"menu-label"},[t._v("\r\n          功能菜单\r\n        ")]),t._v(" "),n("ul",{staticClass:"menu-list"},[n("li",{on:{click:function(e){t.routerGo("articleedit")}}},["guest"!=t.role?n("a",{staticClass:"navbar-item"},[t._v(" 写文章 ")]):t._e()]),t._v(" "),"guest"==t.role?n("li",{on:{click:function(e){t.routerGo("")}}},[n("a",[t._v(" 留言箱 ")])]):t._e(),t._v(" "),"admin"==t.role?n("li",{on:{click:function(e){t.routerGo("")}}},[n("a",[t._v(" 权限 ")])]):t._e(),t._v(" "),n("li",{on:{click:function(e){t.routerGo("")}}},[n("a",[t._v(" 我的GitHub ")])]),t._v(" "),n("li",{on:{click:function(e){t.routerGo("")}}},[n("a",[t._v(" "+t._s(t.touchMove)+" ")])])])])])])])],1)},v=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"navbar-item",attrs:{href:"https://bulma.io"}},[n("img",{attrs:{src:"https://bulma.io/images/bulma-logo.png",alt:"Bulma: a modern CSS framework based on Flexbox",width:"112",height:"28"}})])}],f={render:d,staticRenderFns:v},m=f,h=n("XAIM"),p=s,_=h(l,m,!1,p,null,null);e.default=_.exports}},["BAFm"]);
//# sourceMappingURL=permission.cd53c9f94190b60588ea.js.map